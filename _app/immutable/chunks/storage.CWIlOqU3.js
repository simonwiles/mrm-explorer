import{f as G,p as t,i as R,v as V,r as W,w as l,x as X,k as K,a as D,j as Y,l as Z,e as S,y as $,z as d,A as c,B as u,C as T,D as z,E as ee,s as ae,b as te}from"./disclose-version.C3L7z7x-.js";import{p as le,a as ie,g as se,m as re,s as A}from"./runtime.CsqbjnXD.js";import{c as ne}from"./main-client.B0L5hVVe.js";var oe=te('<div><label><div><!></div></label> <input type="file" tabindex="-1"></div>');function ve(n,a){var U;const v=G(a,["children","$$slots","$$events"]),o=G(v,["accept","files","multiple","validateFiles","labelText","role","disabled","tabindex","id","name","ref","$$props"]);ie(a,!1);let q=t(a,"accept",8,()=>[]),f=t(a,"files",12,()=>[]),H=t(a,"multiple",0,!1),C=t(a,"validateFiles",0,e=>e),I=t(a,"labelText",0,"Add file"),J=t(a,"role",0,"button"),b=t(a,"disabled",0,!1),L=t(a,"tabindex",0,"0"),M=t(a,"id",8,()=>"ccs-"+Math.random().toString(36)),N=t(a,"name",0,""),x=t(a,"ref",4,null);const g=ne();let _=re(!1);R();var i=Z(n,!0,oe);let P;var r=D(i),m=D(r),O=D(m),s=S(S(r,!0));V(s,e=>x(e),()=>x());var p,h,w,y,F,E,k,B;W(()=>{P=$(i,P,[o],!0,""),d(i,"bx--file",!0),p!==(p=M())&&c(r,"for",p),h!==(h=L())&&c(r,"tabindex",h),d(r,"bx--file-browse-btn",!0),d(r,"bx--file-browse-btn--disabled",b()),w!==(w=J())&&c(m,"role",w),d(m,"bx--file__drop-container",!0),d(m,"bx--file__drop-container--drag-over",se(_)),y!==(y=M())&&c(s,"id",y),F!==(F=b())&&(s.disabled=F),E!==(E=q())&&c(s,"accept",E),k!==(k=N())&&c(s,"name",k),B!==(B=H())&&(s.multiple=B),d(s,"bx--file-input",!0)}),l("dragover",i,function(e){u.call(this,a,e)}),l("dragover",i,T(z(({dataTransfer:e})=>{b()||(A(_,!0),e.dropEffect="copy")})),!1),l("dragleave",i,function(e){u.call(this,a,e)}),l("dragleave",i,T(z(({dataTransfer:e})=>{b()||(A(_,!1),e.dropEffect="move")})),!1),l("drop",i,function(e){u.call(this,a,e)}),l("drop",i,T(z(({dataTransfer:e})=>{b()||(A(_,!1),f(C()([...e.files])),g("add",f()),g("change",f()))})),!1),l("keydown",r,function(e){u.call(this,a,e)}),l("keydown",r,({key:e})=>{(e===" "||e==="Enter")&&x().click()},!1),X(O,(U=a.$$slots)==null?void 0:U.labelText,{},e=>{var j=ee(e),Q=ae(j);Y(Q,I),K(e,j)}),l("change",s,({target:e})=>{f(C()([...e.files])),g("add",f()),g("change",f())},!1),l("click",s,function(e){u.call(this,a,e)}),l("click",s,({target:e})=>{e.value=null},!1),K(n,i),le()}const be=async()=>{try{if(navigator.storage&&navigator.storage.estimate)return await navigator.storage.estimate();throw new Error("navigator.storage is not available")}catch(n){console.error(`Failed to get storage stats: ${n}`)}},ue=n=>{const a=["bytes","KiB","MiB","GiB"];let v=0,o=n;for(;o>=1024&&++v;)o=o/1024;return o.toFixed(o<10&&v>0?1:0)+" "+a[v]};export{ve as F,ue as f,be as s};
